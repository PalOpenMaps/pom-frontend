import{b as u}from"./paths.81d58202.js";async function h(r,e=window.fetch){const t=await(await e(r)).json();return t.features=t.features.map(s=>(s.properties.end=s.properties.end||1e4,s.properties.start=s.properties.start||0,s)),t}async function f(r,e=window.fetch){let t=await e(`${u}/data/places/${r}.json`);return t?await t.json():null}function _(r,e){let t=["match",["get",e]];return Object.keys(r).forEach(s=>{t.push(s),t.push(r[s].color)}),t.push("rgba(0,0,0,0)"),t}function m(r,e,t){let s=["all",["in","status",...r.map(a=>a.key)],["in","group",...e.map(a=>a.key)]];return t&&(s=[...s,["<=","start",t],[">=","end",t]]),s}async function w(r,e=window.fetch){let t=await(await e(r)).json();return t=t.filter(s=>s.is_active&&!s.is_overlay),t}async function d(r,e,t=window.fetch){let a=await(await t(r)).json();a.sort((n,o)=>n.layer-o.layer);let l={type:"FeatureCollection",features:[]};for(const n of a){let o=Object.fromEntries(Object.entries(n).filter(([p])=>p!="boundaries")),i=e.find(p=>p.id==n.layer);o.year=o.year?o.year.split("-")[0]:i.start_year.split("-")[0],l.features.push({properties:{...o,scale:i.scale,author:i.attribution.split(",")[0]},geometry:n.boundaries})}return l}function g(r,e,t){return t!="en"&&e[t]&&e[t][r]?e[t][r]:r}function j(r){let e=r.properties;return{p1945:{pop:e.pop_1945,pal:e.pal_1945&&e.pop_1945?100*e.pal_1945/e.pop_1945:null,jsh:e.jsh_1945&&e.pop_1945?100*e.jsh_1945/e.pop_1945:null,oth:null},p2016:{pop:e.pop_2016,pal:e.pal_2016&&e.pop_2016?100*e.pal_2016/e.pop_2016:null,jsh:e.jsh_2016&&e.pop_2016?100*e.jsh_2016/e.pop_2016:null,oth:e.oth_2016&&e.pop_2016?100*e.oth_2016/e.pop_2016:null}}}function y(r,e,t){let s="";if(t){const a=new Date;a.setTime(a.getTime()+t*24*60*60*1e3),s="; expires="+a.toUTCString()}document.cookie=r+"="+(e||"")+"; SameSite=Strict"+s+"; path=/"}function b(r){const e=r+"=",t=document.cookie.split(";");for(let s=0;s<t.length;s++){let a=t[s];for(;a.charAt(0)===" ";)a=a.substring(1,a.length);if(a.indexOf(e)===0)return a.substring(e.length,a.length)}return null}export{w as a,d as b,b as c,f as d,j as e,_ as f,h as g,g as i,m,y as s};
