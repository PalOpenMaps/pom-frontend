var z=Object.defineProperty,S=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var v=(r,e,t)=>e in r?z(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,R=(r,e)=>{for(var t in e||(e={}))H.call(e,t)&&v(r,t,e[t]);if(O)for(var t of O(e))P.call(e,t)&&v(r,t,e[t]);return r},B=(r,e)=>S(r,Z(e));var I={},E={},b=34,C=10,U=13;function M(r){return new Function("d","return {"+r.map(function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'}).join(",")+"}")}function V(r,e){var t=M(r);return function(a,s){return e(t(a),s,r)}}function L(r){var e=Object.create(null),t=[];return r.forEach(function(a){for(var s in a)s in e||t.push(e[s]=s)}),t}function l(r,e){var t=r+"",a=t.length;return a<e?new Array(e-a+1).join(0)+t:t}function q(r){return r<0?"-"+l(-r,6):r>9999?"+"+l(r,6):l(r,4)}function W(r){var e=r.getUTCHours(),t=r.getUTCMinutes(),a=r.getUTCSeconds(),s=r.getUTCMilliseconds();return isNaN(r)?"Invalid Date":q(r.getUTCFullYear())+"-"+l(r.getUTCMonth()+1,2)+"-"+l(r.getUTCDate(),2)+(s?"T"+l(e,2)+":"+l(t,2)+":"+l(a,2)+"."+l(s,3)+"Z":a?"T"+l(e,2)+":"+l(t,2)+":"+l(a,2)+"Z":t||e?"T"+l(e,2)+":"+l(t,2)+"Z":"")}function Y(r){var e=new RegExp('["'+r+`
\r]`),t=r.charCodeAt(0);function a(n,i){var d,u,p=s(n,function(g,_){if(d)return d(g,_-1);u=g,d=i?V(g,i):M(g)});return p.columns=u||[],p}function s(n,i){var d=[],u=n.length,p=0,g=0,_,D=u<=0,j=!1;n.charCodeAt(u-1)===C&&--u,n.charCodeAt(u-1)===U&&--u;function F(){if(D)return E;if(j)return j=!1,I;var A,N=p,y;if(n.charCodeAt(N)===b){for(;p++<u&&n.charCodeAt(p)!==b||n.charCodeAt(++p)===b;);return(A=p)>=u?D=!0:(y=n.charCodeAt(p++))===C?j=!0:y===U&&(j=!0,n.charCodeAt(p)===C&&++p),n.slice(N+1,A-1).replace(/""/g,'"')}for(;p<u;){if((y=n.charCodeAt(A=p++))===C)j=!0;else if(y===U)j=!0,n.charCodeAt(p)===C&&++p;else if(y!==t)continue;return n.slice(N,A)}return D=!0,n.slice(N,u)}for(;(_=F())!==E;){for(var w=[];_!==I&&_!==E;)w.push(_),_=F();i&&(w=i(w,g++))==null||d.push(w)}return d}function h(n,i){return n.map(function(d){return i.map(function(u){return T(d[u])}).join(r)})}function f(n,i){return i==null&&(i=L(n)),[i.map(T).join(r)].concat(h(n,i)).join(`
`)}function o(n,i){return i==null&&(i=L(n)),h(n,i).join(`
`)}function c(n){return n.map(m).join(`
`)}function m(n){return n.map(T).join(r)}function T(n){return n==null?"":n instanceof Date?W(n):e.test(n+="")?'"'+n.replace(/"/g,'""')+'"':n}return{parse:a,parseRows:s,format:f,formatBody:o,formatRows:c,formatRow:m,formatValue:T}}var J=Y(","),K=J.parse;function Q(r){for(var e in r){var t=r[e].trim(),a,s;if(!t)t=null;else if(t==="true")t=!0;else if(t==="false")t=!1;else if(t==="NaN")t=NaN;else if(!isNaN(a=+t))t=a;else if(s=t.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))$&&!!s[4]&&!s[7]&&(t=t.replace(/-/g,"/").replace(/T/," ")),t=new Date(t);else continue;r[e]=t}return r}const $=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();async function X(r,e,t=window.fetch){let s=await(await t(r)).text(),h=K(s,Q);h.sort((o,c)=>o.name_en.localeCompare(c.name_en));let f={type:"FeatureCollection",features:[]};for(const o of h.filter(c=>c.change_2016!="Built & abandoned")){let c={type:"Feature",geometry:{type:"Point",coordinates:[o.lng,o.lat]},properties:R({type:o.type_2016?o.type_2016:o.type_1945,group:o.grp_2016?o.grp_2016:o.grp_1945,color:e[o.change_2016].color},o)};c.properties.name_ar=o.name_ar?o.name_ar:o.name_en,f.features.push(c)}return f}async function k(r,e,t=window.fetch){let s=await(await t(r)).json();s.sort((f,o)=>f.layer-o.layer);let h={type:"FeatureCollection",features:[]};for(const f of s){let o=Object.fromEntries(Object.entries(f).filter(([m])=>m!="boundaries")),c=e.find(m=>m.id==f.layer);o.year=o.year?o.year.split("-")[0]:c.start_year.split("-")[0],h.features.push({properties:B(R({},o),{scale:c.scale,author:c.attribution.split(",")[0]}),geometry:f.boundaries})}return h}function x(r,e,t="en",a="en"){return e[t]&&e[t][r]?e[t][r]:e[a]&&e[a][r]?e[a][r]:r}function ee(r){let e=r.properties;return{p1945:{pop:e.pop_1945,pal:e.pal_1945&&e.pop_1945?100*e.pal_1945/e.pop_1945:null,jsh:e.jsh_1945&&e.pop_1945?100*e.jsh_1945/e.pop_1945:null,oth:null},p2016:{pop:e.pop_2016,pal:e.pal_2016&&e.pop_2016?100*e.pal_2016/e.pop_2016:null,jsh:e.jsh_2016&&e.pop_2016?100*e.jsh_2016/e.pop_2016:null,oth:e.oth_2016&&e.pop_2016?100*e.oth_2016/e.pop_2016:null}}}const re="https://docs.google.com/spreadsheets/d/1LejOouylx6u_TKF_1BxvV_B7uI34M4zIWyoc8LozATo/gviz/tq?tqx=out%3Acsv&sheet=database",te="https://palopenmaps.org/api/layers/?format=json",ne="https://palopenmaps.org/api/sheets/?format=json",oe={Remaining:{name:"Remaining",color:"#7ac943",selected:!0},Depopulated:{name:"Depopulated",color:"#fcee21",selected:!0},Appropriated:{name:"Depopulated & appropriated",color:"#f7931e",selected:!0},"Built over":{name:"Depopulated & built over",color:"#ff0000",selected:!0},Abandoned:{name:"Abandoned",color:"#0099ff",selected:!1},"Newly built":{name:"New locality",color:"#777777",selected:!1}};export{k as a,re as b,ne as c,X as g,x as i,te as l,ee as m,oe as s};
