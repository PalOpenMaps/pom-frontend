var L=Object.defineProperty;var U=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var z=(n,e,r)=>e in n?L(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,B=(n,e)=>{for(var r in e||(e={}))M.call(e,r)&&z(n,r,e[r]);if(U)for(var r of U(e))S.call(e,r)&&z(n,r,e[r]);return n};var F={},b={},D=34,C=10,v=13;function O(n){return new Function("d","return {"+n.map(function(e,r){return JSON.stringify(e)+": d["+r+'] || ""'}).join(",")+"}")}function P(n,e){var r=O(n);return function(o,a){return e(r(o),a,n)}}function I(n){var e=Object.create(null),r=[];return n.forEach(function(o){for(var a in o)a in e||r.push(e[a]=a)}),r}function c(n,e){var r=n+"",o=r.length;return o<e?new Array(e-o+1).join(0)+r:r}function Z(n){return n<0?"-"+c(-n,6):n>9999?"+"+c(n,6):c(n,4)}function H(n){var e=n.getUTCHours(),r=n.getUTCMinutes(),o=n.getUTCSeconds(),a=n.getUTCMilliseconds();return isNaN(n)?"Invalid Date":Z(n.getUTCFullYear())+"-"+c(n.getUTCMonth()+1,2)+"-"+c(n.getUTCDate(),2)+(a?"T"+c(e,2)+":"+c(r,2)+":"+c(o,2)+"."+c(a,3)+"Z":o?"T"+c(e,2)+":"+c(r,2)+":"+c(o,2)+"Z":r||e?"T"+c(e,2)+":"+c(r,2)+"Z":"")}function V(n){var e=new RegExp('["'+n+`
\r]`),r=n.charCodeAt(0);function o(t,i){var f,u,p=a(t,function(h,d){if(f)return f(h,d-1);u=h,f=i?P(h,i):O(h)});return p.columns=u||[],p}function a(t,i){var f=[],u=t.length,p=0,h=0,d,N=u<=0,m=!1;t.charCodeAt(u-1)===C&&--u,t.charCodeAt(u-1)===v&&--u;function E(){if(N)return b;if(m)return m=!1,F;var w,A=p,g;if(t.charCodeAt(A)===D){for(;p++<u&&t.charCodeAt(p)!==D||t.charCodeAt(++p)===D;);return(w=p)>=u?N=!0:(g=t.charCodeAt(p++))===C?m=!0:g===v&&(m=!0,t.charCodeAt(p)===C&&++p),t.slice(A+1,w-1).replace(/""/g,'"')}for(;p<u;){if((g=t.charCodeAt(w=p++))===C)m=!0;else if(g===v)m=!0,t.charCodeAt(p)===C&&++p;else if(g!==r)continue;return t.slice(A,w)}return N=!0,t.slice(A,u)}for(;(d=E())!==b;){for(var j=[];d!==F&&d!==b;)j.push(d),d=E();i&&(j=i(j,h++))==null||f.push(j)}return f}function _(t,i){return t.map(function(f){return i.map(function(u){return T(f[u])}).join(n)})}function y(t,i){return i==null&&(i=I(t)),[i.map(T).join(n)].concat(_(t,i)).join(`
`)}function s(t,i){return i==null&&(i=I(t)),_(t,i).join(`
`)}function l(t){return t.map(R).join(`
`)}function R(t){return t.map(T).join(n)}function T(t){return t==null?"":t instanceof Date?H(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:o,parseRows:a,format:y,formatBody:s,formatRows:l,formatRow:R,formatValue:T}}var q=V(","),W=q.parse;function Y(n){for(var e in n){var r=n[e].trim(),o,a;if(!r)r=null;else if(r==="true")r=!0;else if(r==="false")r=!1;else if(r==="NaN")r=NaN;else if(!isNaN(o=+r))r=o;else if(a=r.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))k&&!!a[4]&&!a[7]&&(r=r.replace(/-/g,"/").replace(/T/," ")),r=new Date(r);else continue;n[e]=r}return n}const k=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();async function K(n,e,r=window.fetch){let a=await(await r(n)).text(),_=W(a,Y);_.sort((s,l)=>s.name_en.localeCompare(l.name_en));let y={type:"FeatureCollection",features:[]};for(const s of _.filter(l=>l.change_2016!="Built & abandoned")){let l={type:"Feature",geometry:{type:"Point",coordinates:[s.lng,s.lat]},properties:B({type:s.type_2016?s.type_2016:s.type_1945,group:s.grp_2016?s.grp_2016:s.grp_1945,color:e[s.change_2016].color},s)};l.properties.name_ar=s.name_ar?s.name_ar:s.name_en,y.features.push(l)}return y}function Q(n,e,r="en",o="en"){return e[r]&&e[r][n]?e[r][n]:e[o]&&e[o][n]?e[o][n]:n}function $(n){let e=n.properties;return{p1945:{pop:e.pop_1945,pal:e.pal_1945&&e.pop_1945?100*e.pal_1945/e.pop_1945:null,jsh:e.jsh_1945&&e.pop_1945?100*e.jsh_1945/e.pop_1945:null,oth:null},p2016:{pop:e.pop_2016,pal:e.pal_2016&&e.pop_2016?100*e.pal_2016/e.pop_2016:null,jsh:e.jsh_2016&&e.pop_2016?100*e.jsh_2016/e.pop_2016:null,oth:e.oth_2016&&e.pop_2016?100*e.oth_2016/e.pop_2016:null}}}function G(n){return{version:8,glyphs:"https://cdn.jsdelivr.net/gh/bothness/basemaps/fonts/{fontstack}/{range}.pbf",sources:{source:{type:"raster",tiles:[n.url],tileSize:256,attribution:n.attribution,minzoom:0,maxzoom:17}},layers:[{id:"base",type:"raster",source:"source"},{id:"overlays-div",type:"background",paint:{"background-opacity":0}},{id:"places-div",type:"background",paint:{"background-opacity":0}}]}}function X(n=1e3){return new Promise(e=>setTimeout(e,n))}const x="https://docs.google.com/spreadsheets/d/1LejOouylx6u_TKF_1BxvV_B7uI34M4zIWyoc8LozATo/gviz/tq?tqx=out%3Acsv&sheet=database",ee="https://palopenmaps.org/api/layers/?format=json",ne={Remaining:{name:"Remaining",color:"#7ac943",selected:!0},Depopulated:{name:"Depopulated",color:"#fcee21",selected:!0},Appropriated:{name:"Depopulated & appropriated",color:"#f7931e",selected:!0},"Built over":{name:"Depopulated & built over",color:"#ff0000",selected:!0},Abandoned:{name:"Abandoned",color:"#0099ff",selected:!1},"Newly built":{name:"New locality",color:"#777777",selected:!1}};export{x as a,$ as b,X as c,K as g,Q as i,ee as l,G as m,ne as s};
