var L=Object.defineProperty;var b=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var z=(r,e,n)=>e in r?L(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,B=(r,e)=>{for(var n in e||(e={}))M.call(e,n)&&z(r,n,e[n]);if(b)for(var n of b(e))S.call(e,n)&&z(r,n,e[n]);return r};var F={},D={},R=34,C=10,E=13;function O(r){return new Function("d","return {"+r.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function P(r,e){var n=O(r);return function(o,a){return e(n(o),a,r)}}function I(r){var e=Object.create(null),n=[];return r.forEach(function(o){for(var a in o)a in e||n.push(e[a]=a)}),n}function c(r,e){var n=r+"",o=n.length;return o<e?new Array(e-o+1).join(0)+n:n}function Z(r){return r<0?"-"+c(-r,6):r>9999?"+"+c(r,6):c(r,4)}function H(r){var e=r.getUTCHours(),n=r.getUTCMinutes(),o=r.getUTCSeconds(),a=r.getUTCMilliseconds();return isNaN(r)?"Invalid Date":Z(r.getUTCFullYear())+"-"+c(r.getUTCMonth()+1,2)+"-"+c(r.getUTCDate(),2)+(a?"T"+c(e,2)+":"+c(n,2)+":"+c(o,2)+"."+c(a,3)+"Z":o?"T"+c(e,2)+":"+c(n,2)+":"+c(o,2)+"Z":n||e?"T"+c(e,2)+":"+c(n,2)+"Z":"")}function V(r){var e=new RegExp('["'+r+`
\r]`),n=r.charCodeAt(0);function o(t,i){var f,p,u=a(t,function(m,d){if(f)return f(m,d-1);p=m,f=i?P(m,i):O(m)});return u.columns=p||[],u}function a(t,i){var f=[],p=t.length,u=0,m=0,d,N=p<=0,h=!1;t.charCodeAt(p-1)===C&&--p,t.charCodeAt(p-1)===E&&--p;function v(){if(N)return D;if(h)return h=!1,F;var A,y=u,g;if(t.charCodeAt(y)===R){for(;u++<p&&t.charCodeAt(u)!==R||t.charCodeAt(++u)===R;);return(A=u)>=p?N=!0:(g=t.charCodeAt(u++))===C?h=!0:g===E&&(h=!0,t.charCodeAt(u)===C&&++u),t.slice(y+1,A-1).replace(/""/g,'"')}for(;u<p;){if((g=t.charCodeAt(A=u++))===C)h=!0;else if(g===E)h=!0,t.charCodeAt(u)===C&&++u;else if(g!==n)continue;return t.slice(y,A)}return N=!0,t.slice(y,p)}for(;(d=v())!==D;){for(var w=[];d!==F&&d!==D;)w.push(d),d=v();i&&(w=i(w,m++))==null||f.push(w)}return f}function _(t,i){return t.map(function(f){return i.map(function(p){return j(f[p])}).join(r)})}function T(t,i){return i==null&&(i=I(t)),[i.map(j).join(r)].concat(_(t,i)).join(`
`)}function s(t,i){return i==null&&(i=I(t)),_(t,i).join(`
`)}function l(t){return t.map(U).join(`
`)}function U(t){return t.map(j).join(r)}function j(t){return t==null?"":t instanceof Date?H(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:o,parseRows:a,format:T,formatBody:s,formatRows:l,formatRow:U,formatValue:j}}var q=V(","),W=q.parse;function Y(r){for(var e in r){var n=r[e].trim(),o,a;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(o=+n))n=o;else if(a=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))J&&!!a[4]&&!a[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;r[e]=n}return r}const J=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();async function Q(r,e,n=window.fetch){let a=await(await n(r)).text(),_=W(a,Y);_.sort((s,l)=>s.name_en.localeCompare(l.name_en));let T={type:"FeatureCollection",features:[]};for(const s of _.filter(l=>l.change_2016!="Built & abandoned")){let l={type:"Feature",geometry:{type:"Point",coordinates:[s.lng,s.lat]},properties:B({type:s.type_2016?s.type_2016:s.type_1945,group:s.grp_2016?s.grp_2016:s.grp_1945,color:e[s.change_2016].color},s)};l.properties.name_ar=s.name_ar?s.name_ar:s.name_en,T.features.push(l)}return T}function $(r,e,n="en",o="en"){return e[n]&&e[n][r]?e[n][r]:e[o]&&e[o][r]?e[o][r]:r}function G(r){let e=r.properties;return{p1945:{pop:e.pop_1945,pal:e.pal_1945&&e.pop_1945?100*e.pal_1945/e.pop_1945:null,jsh:e.jsh_1945&&e.pop_1945?100*e.jsh_1945/e.pop_1945:null,oth:null},p2016:{pop:e.pop_2016,pal:e.pal_2016&&e.pop_2016?100*e.pal_2016/e.pop_2016:null,jsh:e.jsh_2016&&e.pop_2016?100*e.jsh_2016/e.pop_2016:null,oth:e.oth_2016&&e.pop_2016?100*e.oth_2016/e.pop_2016:null}}}function X(r){return{version:8,sources:{source:{type:"raster",tiles:[r.url],tileSize:256,attribution:r.attribution,minzoom:0,maxzoom:17}},layers:[{id:"base",type:"raster",source:"source"}]}}function k(r=1e3){return new Promise(e=>setTimeout(e,r))}const x="https://docs.google.com/spreadsheets/d/1LejOouylx6u_TKF_1BxvV_B7uI34M4zIWyoc8LozATo/gviz/tq?tqx=out%3Acsv&sheet=database",ee="https://palopenmaps.org/api/layers/?format=json",re={Remaining:{name:"Remaining",color:"#7ac943",selected:!0},Depopulated:{name:"Depopulated",color:"#fcee21",selected:!0},Appropriated:{name:"Depopulated & appropriated",color:"#f7931e",selected:!0},"Built over":{name:"Depopulated & built over",color:"#ff0000",selected:!0},Abandoned:{name:"Abandoned",color:"#0099ff",selected:!1},"Newly built":{name:"New locality",color:"#777777",selected:!1}};export{x as a,G as b,k as c,Q as g,$ as i,ee as l,X as m,re as s};
