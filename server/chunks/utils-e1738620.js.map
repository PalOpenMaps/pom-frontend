{"version":3,"file":"utils-e1738620.js","sources":["../../../.svelte-kit/adapter-node/chunks/utils.js"],"sourcesContent":["import { a as cdnBase } from \"./config.js\";\nasync function getPlaces(url, fetch = window.fetch) {\n  const places = await (await fetch(url)).json();\n  places.features = places.features.map((f) => {\n    f.properties.end = f.properties.end || 1e4;\n    f.properties.start = f.properties.start || 0;\n    return f;\n  });\n  return places;\n}\nasync function getPlace(slug, fetch = window.fetch) {\n  let res = await fetch(`${cdnBase}/data/places/${slug}.json`);\n  return res ? await res.json() : null;\n}\nfunction makeFilter(statuses, groups, year) {\n  let filter = [\"all\", [\"in\", \"status\", ...statuses.map((a) => a.key)], [\"in\", \"group\", ...groups.map((a) => a.key)]];\n  if (year)\n    filter = [...filter, [\"<=\", \"start\", year], [\">=\", \"end\", year]];\n  return filter;\n}\nasync function getConfig(url, fetch = window.fetch) {\n  const config = await (await fetch(url)).json();\n  return config;\n}\nasync function getSheets(url, config, fetch = window.fetch) {\n  let sheets = await (await fetch(url)).json();\n  return sheets;\n}\nfunction i18n(key, texts, lang) {\n  if (typeof key === \"object\") {\n    return key[`name_${lang}`] || key[`${lang}`] || key.name || key.name_en;\n  }\n  return texts?.[key]?.[lang] || key;\n}\nfunction makeDataset(place) {\n  let props = place.properties;\n  return {\n    p1945: {\n      pop: props.pop_1945,\n      pal: props.pal_1945 && props.pop_1945 ? 100 * props.pal_1945 / props.pop_1945 : null,\n      jsh: props.jsh_1945 && props.pop_1945 ? 100 * props.jsh_1945 / props.pop_1945 : null,\n      oth: null\n    },\n    p2016: {\n      pop: props.pop_2016,\n      pal: props.pal_2016 && props.pop_2016 ? 100 * props.pal_2016 / props.pop_2016 : null,\n      jsh: props.jsh_2016 && props.pop_2016 ? 100 * props.jsh_2016 / props.pop_2016 : null,\n      oth: props.oth_2016 && props.pop_2016 ? 100 * props.oth_2016 / props.pop_2016 : null\n    }\n  };\n}\nexport {\n  getConfig as a,\n  getSheets as b,\n  getPlace as c,\n  makeDataset as d,\n  getPlaces as g,\n  i18n as i,\n  makeFilter as m\n};\n"],"names":[],"mappings":"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"}